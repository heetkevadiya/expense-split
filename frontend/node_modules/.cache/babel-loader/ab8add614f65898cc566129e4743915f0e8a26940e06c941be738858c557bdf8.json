{"ast":null,"code":"var _jsxFileName = \"D:\\\\internship\\\\2\\\\task\\\\expensesplit\\\\frontend\\\\src\\\\components\\\\Settlement.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Settlement({\n  bills,\n  members,\n  onBack\n}) {\n  _s();\n  const [settlements, setSettlements] = useState([]);\n  useEffect(() => {\n    calculateOverallSettlements();\n  }, [bills, members]);\n  const calculateOverallSettlements = () => {\n    const balances = {};\n    members.forEach(m => balances[m] = 0);\n    bills.forEach(exp => {\n      exp.splits.forEach(s => {\n        balances[s.name] -= s.value;\n      });\n      balances[exp.paidBy] += exp.amount;\n    });\n    const positive = [];\n    const negative = [];\n    Object.entries(balances).forEach(([user, amount]) => {\n      if (amount > 0) positive.push({\n        user,\n        amount\n      });else if (amount < 0) negative.push({\n        user,\n        amount: -amount\n      });\n    });\n    const newSettlements = [];\n    while (positive.length && negative.length) {\n      const p = positive[0];\n      const n = negative[0];\n      const settledAmount = Math.min(p.amount, n.amount);\n      newSettlements.push({\n        from: n.user,\n        to: p.user,\n        amount: settledAmount.toFixed(2)\n      });\n      p.amount -= settledAmount;\n      n.amount -= settledAmount;\n      if (p.amount === 0) positive.shift();\n      if (n.amount === 0) negative.shift();\n    }\n    setSettlements(newSettlements);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-5 my-5 rounded-lg shadow-md\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-gray-700 mb-4 border-b-2 border-indigo-500 pb-1\",\n      children: \"Overall Settlements\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), settlements.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"list-none p-0\",\n      children: settlements.map((s, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"bg-gray-100 m-1 p-2.5 rounded border-l-4 border-indigo-500\",\n        children: [s.from, \" pays \\u20B9\", s.amount, \" to \", s.to]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"bg-indigo-500 text-white border-none p-2.5 rounded cursor-pointer text-base m-1 transition-colors hover:bg-indigo-700 mt-5\",\n      onClick: onBack,\n      children: \"Back\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n_s(Settlement, \"pFjuYvag3uBIiWcrL1yNL4hkWqA=\");\n_c = Settlement;\nexport default Settlement;\nvar _c;\n$RefreshReg$(_c, \"Settlement\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","Settlement","bills","members","onBack","_s","settlements","setSettlements","calculateOverallSettlements","balances","forEach","m","exp","splits","s","name","value","paidBy","amount","positive","negative","Object","entries","user","push","newSettlements","length","p","n","settledAmount","Math","min","from","to","toFixed","shift","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","i","onClick","_c","$RefreshReg$"],"sources":["D:/internship/2/task/expensesplit/frontend/src/components/Settlement.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nfunction Settlement({ bills, members, onBack }) {\r\n  const [settlements, setSettlements] = useState([]);\r\n\r\n  useEffect(() => {\r\n    calculateOverallSettlements();\r\n  }, [bills, members,]);\r\n\r\n  const calculateOverallSettlements = () => {\r\n    const balances = {};\r\n    members.forEach((m) => (balances[m] = 0));\r\n    bills.forEach((exp) => {\r\n      exp.splits.forEach((s) => {\r\n        balances[s.name] -= s.value;\r\n      });\r\n      balances[exp.paidBy] += exp.amount;\r\n    });\r\n\r\n    const positive = [];\r\n    const negative = [];\r\n    Object.entries(balances).forEach(([user, amount]) => {\r\n      if (amount > 0) positive.push({ user, amount });\r\n      else if (amount < 0) negative.push({ user, amount: -amount });\r\n    });\r\n\r\n    const newSettlements = [];\r\n    while (positive.length && negative.length) {\r\n      const p = positive[0];\r\n      const n = negative[0];\r\n      const settledAmount = Math.min(p.amount, n.amount);\r\n      newSettlements.push({\r\n        from: n.user,\r\n        to: p.user,\r\n        amount: settledAmount.toFixed(2),\r\n      });\r\n      p.amount -= settledAmount;\r\n      n.amount -= settledAmount;\r\n      if (p.amount === 0) positive.shift();\r\n      if (n.amount === 0) negative.shift();\r\n    }\r\n    setSettlements(newSettlements);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white p-5 my-5 rounded-lg shadow-md\">\r\n      <h2 className=\"text-gray-700 mb-4 border-b-2 border-indigo-500 pb-1\">\r\n        Overall Settlements\r\n      </h2>\r\n      {settlements.length > 0 && (\r\n        <ul className=\"list-none p-0\">\r\n          {settlements.map((s, i) => (\r\n            <li\r\n              key={i}\r\n              className=\"bg-gray-100 m-1 p-2.5 rounded border-l-4 border-indigo-500\"\r\n            >\r\n              {s.from} pays â‚¹{s.amount} to {s.to}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      <button\r\n        className=\"bg-indigo-500 text-white border-none p-2.5 rounded cursor-pointer text-base m-1 transition-colors hover:bg-indigo-700 mt-5\"\r\n        onClick={onBack}\r\n      >\r\n        Back\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Settlement;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnD,SAASC,UAAUA,CAAC;EAAEC,KAAK;EAAEC,OAAO;EAAEC;AAAO,CAAC,EAAE;EAAAC,EAAA;EAC9C,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EAElDC,SAAS,CAAC,MAAM;IACdU,2BAA2B,CAAC,CAAC;EAC/B,CAAC,EAAE,CAACN,KAAK,EAAEC,OAAO,CAAE,CAAC;EAErB,MAAMK,2BAA2B,GAAGA,CAAA,KAAM;IACxC,MAAMC,QAAQ,GAAG,CAAC,CAAC;IACnBN,OAAO,CAACO,OAAO,CAAEC,CAAC,IAAMF,QAAQ,CAACE,CAAC,CAAC,GAAG,CAAE,CAAC;IACzCT,KAAK,CAACQ,OAAO,CAAEE,GAAG,IAAK;MACrBA,GAAG,CAACC,MAAM,CAACH,OAAO,CAAEI,CAAC,IAAK;QACxBL,QAAQ,CAACK,CAAC,CAACC,IAAI,CAAC,IAAID,CAAC,CAACE,KAAK;MAC7B,CAAC,CAAC;MACFP,QAAQ,CAACG,GAAG,CAACK,MAAM,CAAC,IAAIL,GAAG,CAACM,MAAM;IACpC,CAAC,CAAC;IAEF,MAAMC,QAAQ,GAAG,EAAE;IACnB,MAAMC,QAAQ,GAAG,EAAE;IACnBC,MAAM,CAACC,OAAO,CAACb,QAAQ,CAAC,CAACC,OAAO,CAAC,CAAC,CAACa,IAAI,EAAEL,MAAM,CAAC,KAAK;MACnD,IAAIA,MAAM,GAAG,CAAC,EAAEC,QAAQ,CAACK,IAAI,CAAC;QAAED,IAAI;QAAEL;MAAO,CAAC,CAAC,CAAC,KAC3C,IAAIA,MAAM,GAAG,CAAC,EAAEE,QAAQ,CAACI,IAAI,CAAC;QAAED,IAAI;QAAEL,MAAM,EAAE,CAACA;MAAO,CAAC,CAAC;IAC/D,CAAC,CAAC;IAEF,MAAMO,cAAc,GAAG,EAAE;IACzB,OAAON,QAAQ,CAACO,MAAM,IAAIN,QAAQ,CAACM,MAAM,EAAE;MACzC,MAAMC,CAAC,GAAGR,QAAQ,CAAC,CAAC,CAAC;MACrB,MAAMS,CAAC,GAAGR,QAAQ,CAAC,CAAC,CAAC;MACrB,MAAMS,aAAa,GAAGC,IAAI,CAACC,GAAG,CAACJ,CAAC,CAACT,MAAM,EAAEU,CAAC,CAACV,MAAM,CAAC;MAClDO,cAAc,CAACD,IAAI,CAAC;QAClBQ,IAAI,EAAEJ,CAAC,CAACL,IAAI;QACZU,EAAE,EAAEN,CAAC,CAACJ,IAAI;QACVL,MAAM,EAAEW,aAAa,CAACK,OAAO,CAAC,CAAC;MACjC,CAAC,CAAC;MACFP,CAAC,CAACT,MAAM,IAAIW,aAAa;MACzBD,CAAC,CAACV,MAAM,IAAIW,aAAa;MACzB,IAAIF,CAAC,CAACT,MAAM,KAAK,CAAC,EAAEC,QAAQ,CAACgB,KAAK,CAAC,CAAC;MACpC,IAAIP,CAAC,CAACV,MAAM,KAAK,CAAC,EAAEE,QAAQ,CAACe,KAAK,CAAC,CAAC;IACtC;IACA5B,cAAc,CAACkB,cAAc,CAAC;EAChC,CAAC;EAED,oBACEzB,OAAA;IAAKoC,SAAS,EAAC,wCAAwC;IAAAC,QAAA,gBACrDrC,OAAA;MAAIoC,SAAS,EAAC,sDAAsD;MAAAC,QAAA,EAAC;IAErE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EACJnC,WAAW,CAACoB,MAAM,GAAG,CAAC,iBACrB1B,OAAA;MAAIoC,SAAS,EAAC,eAAe;MAAAC,QAAA,EAC1B/B,WAAW,CAACoC,GAAG,CAAC,CAAC5B,CAAC,EAAE6B,CAAC,kBACpB3C,OAAA;QAEEoC,SAAS,EAAC,4DAA4D;QAAAC,QAAA,GAErEvB,CAAC,CAACkB,IAAI,EAAC,cAAO,EAAClB,CAAC,CAACI,MAAM,EAAC,MAAI,EAACJ,CAAC,CAACmB,EAAE;MAAA,GAH7BU,CAAC;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAIJ,CACL;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CACL,eACDzC,OAAA;MACEoC,SAAS,EAAC,4HAA4H;MACtIQ,OAAO,EAAExC,MAAO;MAAAiC,QAAA,EACjB;IAED;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV;AAACpC,EAAA,CAnEQJ,UAAU;AAAA4C,EAAA,GAAV5C,UAAU;AAqEnB,eAAeA,UAAU;AAAC,IAAA4C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}